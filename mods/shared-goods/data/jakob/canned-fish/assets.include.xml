<!-- 
  Canned Fish Production
-->
<ModOps>
  <Include File="../../../products/canned-fish/assets.include.xml" />

  <!-- # Intermediate Production: Olives -->
  <ModOp GUID='1010281' Type="addNextSibling">
    <Asset>
      <Template>Product</Template>
      <Values>
        <Standard>
          <GUID>1500010105</GUID>
          <Name>olives</Name>
          <IconFilename>data\jakob\canned-fish\olive_treeplanter\icon_olives.png</IconFilename>
          <InfoDescription>1500010017</InfoDescription>
        </Standard>
        <Locked />
        <Product>
          <StorageLevel>Building</StorageLevel>
          <ProductCategory>11702</ProductCategory> <!-- natural products -->
          <BasePrice>40</BasePrice>
          <CivLevel>2</CivLevel>
          <AssociatedRegion>Moderate</AssociatedRegion>
          <ProductionRegions>
            <Item>
              <RegionType>Moderate</RegionType>
            </Item>
          </ProductionRegions>
        </Product>
        <ExpeditionAttribute>
          <BaseMorale>10</BaseMorale>
        </ExpeditionAttribute>
      </Values>
    </Asset>
    <Asset>
      <Template>FarmBuilding</Template>
      <Values>
        <Standard>
          <GUID>1500010107</GUID>
          <Name>olive_tree_farm</Name>
          <IconFilename>data\jakob\canned-fish\olive_treeplanter\icon_olives.png</IconFilename>
        </Standard>
        <Building>
          <BuildModeRandomRotation>180</BuildModeRandomRotation>
          <AssociatedRegions>Moderate</AssociatedRegions>
          <SecondPartyRelevant>0</SecondPartyRelevant>
        </Building>
        <Blocking />
        <Cost>
          <Costs>
            <Item>
              <Ingredient>1010017</Ingredient>
              <Amount>4000</Amount>
            </Item>
            <Item>
              <Ingredient>1010196</Ingredient>
              <Amount>6</Amount>
            </Item>
            <Item>
              <Ingredient>1010205</Ingredient>
              <Amount>2</Amount>
            </Item>
            <Item>
              <Ingredient>1010218</Ingredient>
            </Item>
            <Item>
              <Ingredient>1010207</Ingredient>
            </Item>
            <Item>
              <Ingredient>1010202</Ingredient>
            </Item>
          </Costs>
        </Cost>
        <Object>
          <Variations>
            <Item>
              <Filename>data\jakob\canned-fish\olive_treeplanter\olive_treeplanter.cfg</Filename>
            </Item>
          </Variations>
        </Object>
        <Mesh />
        <Selection>
          <ParticipantMessageArcheType>Resident_tier01_atWork</ParticipantMessageArcheType>
          <Colors>
            <WeakSelectionColorType>NoColor</WeakSelectionColorType>
          </Colors>
        </Selection>
        <Constructable />
        <Locked />
        <SoundEmitter>
          <ActiveSounds>
            <Item>
              <Sound>214800</Sound>
            </Item>
            <Item>
              <Sound>206376</Sound>
            </Item>
          </ActiveSounds>
          <ConstructionSounds>
            <BuildMoveSuccess>
              <Item>
                <VectorElement>
                  <InheritedIndex>0</InheritedIndex>
                  <InheritanceMapV2>
                    <Entry>
                      <TemplateName>FarmBuilding</TemplateName>
                      <Index>0</Index>
                    </Entry>
                  </InheritanceMapV2>
                </VectorElement>
                <Sound>214783</Sound>
              </Item>
            </BuildMoveSuccess>
          </ConstructionSounds>
          <IncidentSounds>
            <InfectedFire>
              <Item>
                <Sound>214659</Sound>
              </Item>
            </InfectedFire>
          </IncidentSounds>
          <MaterialType>Wood</MaterialType>
        </SoundEmitter>
        <FeedbackController />
        <Infolayer />
        <UpgradeList />
        <Factory7 />
        <FactoryBase>
          <FactoryOutputs>
            <Item>
              <Product>1500010105</Product>
              <Amount>1</Amount>
              <StorageAmount>2</StorageAmount>
            </Item>
          </FactoryOutputs>
          <CycleTime>60</CycleTime>
          <IsMainFactory>1</IsMainFactory>
        </FactoryBase>
        <LogisticNode />
        <ModuleOwner>
          <ModuleLimits>
            <Main>
              <Limit>75</Limit>
            </Main>
          </ModuleLimits>
          <ConstructionOptions>
            <Item>
              <ModuleGUID>1500010110</ModuleGUID>
            </Item>
          </ConstructionOptions>
          <ModuleBuildRadius>27</ModuleBuildRadius>
          <AdditionalModuleMustBeMainBuildingAdjacent>0</AdditionalModuleMustBeMainBuildingAdjacent>
          <AdditionalModule>269837</AdditionalModule> <!-- same as non-grain farms -->
        </ModuleOwner>
        <AmbientMoodProvider>
          <AmbientMood>AgricultureBuildingsEurope</AmbientMood>
        </AmbientMoodProvider>
        <Maintenance>
          <Maintenances>
            <Item>
              <Product>1010017</Product>
              <Amount>150</Amount>
              <InactiveAmount>75</InactiveAmount>
            </Item>
            <Item>
              <Product>1010052</Product>
              <Amount>30</Amount>
            </Item>
          </Maintenances>
        </Maintenance>
        <Attackable>
          <MaximumHitPoints>1500</MaximumHitPoints>
          <SelfHealPerHealTick>4</SelfHealPerHealTick>
        </Attackable>
        <IncidentInfectable>
          <Infectable>
            <Illness>
              <Escalated>0</Escalated>
            </Illness>
            <Explosion>
              <Base>0</Base>
              <Escalated>0</Escalated>
            </Explosion>
          </Infectable>
          <Explosion>
            <ExplosionCoreDamage>1000</ExplosionCoreDamage>
          </Explosion>
          <IncidentInfectionChanceFactors>
            <Fire>
              <DensityFactor>0.025</DensityFactor>
              <DensityDistance>20</DensityDistance>
              <FactoryProductivityFactor>0.1</FactoryProductivityFactor>
              <FactoryUndertimeFactor>0.05</FactoryUndertimeFactor>
            </Fire>
            <Riot>
              <FactoryOvertimeFactor>0.4</FactoryOvertimeFactor>
              <FactoryUndertimeFactor>0.2</FactoryUndertimeFactor>
              <FactoryHappinessFactor>0.2</FactoryHappinessFactor>
              <HappinessThreshold>20</HappinessThreshold>
            </Riot>
          </IncidentInfectionChanceFactors>
        </IncidentInfectable>
        <Pausable />
        <Culture>
          <CultureType>Landscaping</CultureType>
        </Culture>
        <QuestObject />
        <Industrializable />
        <Motorizable>
          <MotorizableType>Tractor</MotorizableType>
        </Motorizable>
      </Values>
    </Asset>
    <Asset>
      <Template>Farmfield</Template>
      <Values>
        <Standard>
          <GUID>1500010110</GUID>
          <Name>olive_tree_field</Name>
          <IconFilename>data\jakob\canned-fish\olive_treeplanter\icon_olive_tree.png</IconFilename>
        </Standard>
        <Building>
          <BuildModeRandomRotation>90</BuildModeRandomRotation>
          <AssociatedRegions>Moderate</AssociatedRegions>
        </Building>
        <Blocking>
          <GroundDecalAsset>102510</GroundDecalAsset>
          <HasBuildingBaseTiles>1</HasBuildingBaseTiles>
        </Blocking>
        <Cost>
          <Costs>
            <Item>
              <Ingredient>1010017</Ingredient>
              <Amount>5</Amount>
            </Item>
            <Item>
              <Ingredient>1010196</Ingredient>
            </Item>
            <Item>
              <Ingredient>1010205</Ingredient>
            </Item>
            <Item>
              <Ingredient>1010218</Ingredient>
            </Item>
            <Item>
              <Ingredient>1010207</Ingredient>
            </Item>
            <Item>
              <Ingredient>1010202</Ingredient>
            </Item>
          </Costs>
        </Cost>
        <Object>
          <Variations>
            <Item>
              <Filename>data\jakob\canned-fish\olive_treeplanter\olive_field_01.cfg</Filename>
            </Item>
            <Item>
              <Filename>data\jakob\canned-fish\olive_treeplanter\olive_field_05.cfg</Filename>
            </Item>
            <Item>
              <Filename>data\jakob\canned-fish\olive_treeplanter\olive_field_03.cfg</Filename>
            </Item>
            <Item>
              <Filename>data\jakob\canned-fish\olive_treeplanter\olive_field_04.cfg</Filename>
            </Item>
            <Item>
              <Filename>data\jakob\canned-fish\olive_treeplanter\olive_field_02.cfg</Filename>
            </Item>
          </Variations>
        </Object>
      </Values>
    </Asset>
    <Asset>
      <Template>GuildhouseBuff</Template>
      <Values>
        <Standard>
          <GUID>1500010123</GUID>
          <Name>Productivity - Decree 1 Buff_01</Name>
          <IconFilename>data/ui/2kimages/main/3dicons/palace/icon_agricultural_subsidy.png</IconFilename>
          <InfoDescription>269415</InfoDescription>
        </Standard>
        <ItemEffect>
          <EffectTargets>
            <Item>
              <GUID>1500010107</GUID>
            </Item>
          </EffectTargets>
        </ItemEffect>
        <FactoryUpgrade>
          <AdditionalOutput>
            <Item>
              <Product>1500010105</Product>
              <AdditionalOutputCycle>2</AdditionalOutputCycle>
              <Amount>1</Amount>
            </Item>
          </AdditionalOutput>
        </FactoryUpgrade>
      </Values>
    </Asset>
  </ModOp>
  <!-- StandardProductList,StandardMarketplaceModerateStorageList: append -->
  <ModOp Type="add" GUID="120055">
    <ignore>
      <Item />
    </ignore>
  </ModOp>
  <ModOp Type="add" GUID="120055,120057"
    Path="/Values/ProductStorageList/ProductList[not(Item/Product='1500010105')] | //ignore[1]">
    <Item>
      <Product>1500010105</Product>
    </Item>
  </ModOp>
  <!-- goods: after soap -->
  <ModOp Type="addNextSibling" GUID="502018,502005"
    Path="/Values/ProductList/List/Item[Product='1010203' and not(../Item/Product='1500010105')] | //ignore/Item[1]">
    <Item>
      <Product>1500010105</Product>
    </Item>
  </ModOp>
  <!-- agriculture: after grain -->
  <ModOp Type="addNextSibling" GUID="502037"
    Path="/Values/ProductList/List/Item[Product='1010192' and not(../Item/Product='1500010105')] | //ignore/Item[1]">
    <Item>
      <Product>1500010105</Product>
    </Item>
  </ModOp>

  <!-- # Need: Canned Fish -->
  <ModOp GUID='1010200' Type="addNextSibling">
    <Asset>
      <Template>FactoryBuilding7</Template>
      <Values>
        <Standard>
          <GUID>1500010121</GUID>
          <Name>fish_cannery</Name>
          <IconFilename>data\ui\2kimages\main\3dicons\icon_canned_food.png</IconFilename>
        </Standard>
        <Building>
          <BuildModeRandomRotation>180</BuildModeRandomRotation>
          <AssociatedRegions>Moderate</AssociatedRegions>
          <SecondPartyRelevant>0</SecondPartyRelevant>
        </Building>
        <Blocking />
        <Cost>
          <Costs>
            <Item>
              <Ingredient>1010017</Ingredient>
              <Amount>25000</Amount>
            </Item>
            <Item>
              <Ingredient>1010196</Ingredient>
              <Amount>6</Amount>
            </Item>
            <Item>
              <Ingredient>1010205</Ingredient>
              <Amount>10</Amount>
            </Item>
            <Item>
              <Ingredient>1010218</Ingredient>
              <Amount>8</Amount>
            </Item>
            <Item>
              <Ingredient>1010207</Ingredient>
              <Amount>8</Amount>
            </Item>
            <Item>
              <Ingredient>1010202</Ingredient>
            </Item>
          </Costs>
        </Cost>
        <Object>
          <Variations>
            <Item>
              <Filename>data\jakob\canned-fish\fish_cannery\fish_cannery.cfg</Filename>
            </Item>
          </Variations>
        </Object>
        <Mesh />
        <Selection>
          <ParticipantMessageArcheType>Resident_tier03_atWork</ParticipantMessageArcheType>
          <Colors>
            <WeakSelectionColorType>NoColor</WeakSelectionColorType>
          </Colors>
        </Selection>
        <Constructable />
        <Locked>
          <DefaultLockedState>1</DefaultLockedState>
        </Locked>
        <SoundEmitter>
          <ActiveSounds>
            <Item>
              <Sound>216877</Sound>
            </Item>
            <Item>
              <Sound>239840</Sound>
            </Item>
          </ActiveSounds>
          <IncidentSounds>
            <InfectedFire>
              <Item>
                <Sound>214659</Sound>
              </Item>
            </InfectedFire>
          </IncidentSounds>
        </SoundEmitter>
        <FeedbackController />
        <Infolayer />
        <UpgradeList />
        <Factory7 />
        <FactoryBase>
          <FactoryInputs>
            <Item>
              <Product>1010227</Product>
              <Amount>1</Amount>
              <StorageAmount>3</StorageAmount>
            </Item>
            <Item>
              <Product>1500010105</Product>
              <Amount>1</Amount>
              <StorageAmount>3</StorageAmount>
            </Item>
            <Item>
              <Product>1010200</Product>
              <Amount>1</Amount>
              <StorageAmount>3</StorageAmount>
            </Item>
          </FactoryInputs>
          <FactoryOutputs>
            <Item>
              <Product>1500010120</Product>
              <Amount>1</Amount>
              <StorageAmount>2</StorageAmount>
            </Item>
          </FactoryOutputs>
          <CycleTime>60</CycleTime>
          <IsMainFactory>1</IsMainFactory>
        </FactoryBase>
        <LogisticNode />
        <AmbientMoodProvider>
          <Murmur>Factory</Murmur>
          <DynamicEnvironmentType>None</DynamicEnvironmentType>
        </AmbientMoodProvider>
        <Maintenance>
          <Maintenances>
            <Item>
              <Product>1010017</Product>
              <Amount>200</Amount>
              <InactiveAmount>10</InactiveAmount>
            </Item>
            <Item>
              <Product>1010116</Product>
              <Amount>150</Amount>
            </Item>
          </Maintenances>
        </Maintenance>
        <Attackable>
          <MaximumHitPoints>4250</MaximumHitPoints>
          <SelfHealPerHealTick>4</SelfHealPerHealTick>
        </Attackable>
        <Pausable />
        <IncidentInfectable>
          <IncidentInfectionChanceFactors>
            <Fire>
              <DensityDistance>20</DensityDistance>
              <FactoryProductivityFactor>0.1</FactoryProductivityFactor>
              <FactoryUndertimeFactor>0.05</FactoryUndertimeFactor>
            </Fire>
            <Riot>
              <HappinessThreshold>20</HappinessThreshold>
            </Riot>
          </IncidentInfectionChanceFactors>
        </IncidentInfectable>
        <Industrializable />
        <Culture>
          <CultureType>Culture</CultureType>
        </Culture>
        <QuestObject />
        <Electrifiable />
      </Values>
    </Asset>
    <Asset>
      <Template>ProductionChain</Template>
      <Values>
        <Standard>
          <GUID>1500010122</GUID>
          <Name>canned_fish_chain</Name>
          <IconFilename>data/ui/2kimages/main/3dicons/icon_canned_food.png</IconFilename>
        </Standard>
        <ProductionChain>
          <Building>1500010121</Building>
          <Tier1>
            <Item>
              <Building>1010305</Building>
            </Item>
            <Item>
              <Building>1500010107</Building>
            </Item>
            <Item>
              <Building>1010278</Building>
            </Item>
          </Tier1>
        </ProductionChain>
        <Locked>
          <DefaultLockedState>1</DefaultLockedState>
        </Locked>
      </Values>
    </Asset>
    <Asset>
      <Template>AssetPool</Template>
      <Values>
        <Standard>
          <GUID>1500010164</GUID>
          <Name>asset pool canned fish</Name>
        </Standard>
        <AssetPool>
          <AssetList>
            <Item>
              <Asset>1500010120</Asset>
            </Item>
            <Item>
              <Asset>1500010121</Asset>
            </Item>
            <Item>
              <Asset>1500010122</Asset>
            </Item>
            <Item>
              <Asset>1500010107</Asset>
            </Item>
            <Item>
              <Asset>1500010105</Asset>
            </Item>
            <Item>
              <Asset>1500010110</Asset>
            </Item>
          </AssetList>
        </AssetPool>
      </Values>
    </Asset>
    <Asset>
      <Template>TownhallBuff</Template>
      <Values>
        <Standard>
          <GUID>1500010183</GUID>
          <Name>obsolete: cannery_reduced_needs</Name>
          <IconFilename>data\ui\2kimages\main\3dicons\icon_canned_food.png</IconFilename>
        </Standard>
      </Values>
    </Asset>
    <Asset>
      <Template>Trigger</Template>
      <Values>
        <Standard>
          <GUID>1500010197</GUID>
          <Name>Unlock @ 900 Artisans</Name>
          <IconFilename>data/ui/2kimages/main/profiles/resident_tier01.png</IconFilename>
        </Standard>
        <Trigger>
          <TriggerCondition>
            <Template>ConditionPlayerCounter</Template>
            <Values>
              <Condition />
              <ConditionPlayerCounter>
                <PlayerCounter>PopulationByLevel</PlayerCounter>
                <Context>15000002</Context>
                <CounterAmount>900</CounterAmount>
              </ConditionPlayerCounter>
            </Values>
          </TriggerCondition>
          <TriggerActions>
            <Item>
              <TriggerAction>
                <Template>ActionUnlockAsset</Template>
                <Values>
                  <Action />
                  <ActionUnlockAsset>
                    <UnlockAssets>
                      <Item>
                        <Asset>1500010164</Asset>
                      </Item>
                    </UnlockAssets>
                  </ActionUnlockAsset>
                </Values>
              </TriggerAction>
            </Item>
          </TriggerActions>
        </Trigger>
        <TriggerSetup>
          <UsedBySecondParties>0</UsedBySecondParties>
        </TriggerSetup>
      </Values>
    </Asset>
  </ModOp>
  
  <!-- # Construction Menu: after canned food -->
  <ModOp Type="addNextSibling" GUID="25000191,500945"
    Path="/Values/ConstructionCategory/BuildingList/Item[Building='500008' and not(//ForceIcon[.='1500010951']) and (//PopulationInputs/Item/Product='1500010120')] | //ignore/Item[1]">
    <Item>
      <Building>1500010122</Building>
    </Item>
  </ModOp>

  <!-- # Feedback -->
  <ModOp Type="add" GUID="142311" Path="/Values/FeedbackBuildingGroup/Buildings">
    <Item>
      <Building>1500010121</Building>
    </Item>
  </ModOp>
  <ModOp Type="add" GUID='142311' Path="/Values/FeedbackBuildingGroup/Buildings">
    <Item>
      <Building>1500010107</Building>
    </Item>
  </ModOp>
  <!-- tractor feedback -->
  <ModOp Type="add" GUID="2001096" Path="/Values/FeedbackSessionDescription/FarmFieldConfig/FarmFieldBuildings">
    <Item>
      <Building>1500010107</Building>
      <PersonSpawners>
        <Item>
          <UnitClass>141674</UnitClass>
        </Item>
      </PersonSpawners>
      <VehicleSpawners>
        <Item>
          <UnitClass>269770</UnitClass>
        </Item>
        <Item>
          <UnitClass>25272</UnitClass>
          <VehicleType>Fertilizer</VehicleType>
        </Item>
      </VehicleSpawners>
    </Item>
  </ModOp>

  <!-- # buff targets -->
  <!-- all kinds of crop stuff (I'll include the orchard even though that's not commonplace) -->
  <ModOp Type="add" GUID="194006,191471,190865" Path="/Values/ItemEffectTargetPool/EffectTargetGUIDs">
    <Item>
      <GUID>1500010107</GUID>
    </Item>
  </ModOp>
  <!-- orchards -->
  <ModOp Type="add" GUID="194008" Path="/Values/ItemEffectTargetPool/EffectTargetGUIDs">
    <Item>
      <GUID>1500010107</GUID>
    </Item>
  </ModOp>
  <!-- all farms, including cattle farm -->
  <ModOp Type="add" GUID="190011" Path="/Values/ItemEffectTargetPool/EffectTargetGUIDs">
    <Item>
      <GUID>1500010107</GUID>
    </Item>
  </ModOp>
  <!-- all food productions -->
  <ModOp Type="add" GUID="190897" Path="/Values/ItemEffectTargetPool/EffectTargetGUIDs">
    <Item>
      <GUID>1500010121</GUID>
    </Item>
  </ModOp>
  <!-- land reform act -->
  <ModOp Type="add" GUID="269365" Path="/Values/EffectContainer/Effects">
    <Item>
      <Effect>1500010123</Effect>
    </Item>
  </ModOp>
  
  <!-- specific items -->
  <ModOp Type="add" GUID="190745,190747,190749,190751" Path="/Values/ItemEffect/EffectTargets">
    <Item>
      <GUID>1500010107</GUID>
    </Item>
  </ModOp>
  <ModOp Type="add" GUID="191398" Path="/Values/ItemEffect/EffectTargets">
    <Item>
      <GUID>1500010121</GUID>
    </Item>
  </ModOp>
  <ModOp Type="add" GUID="136823,190751,190749" Path="/Values/ItemEffect/EffectTargets">
    <Item>
      <GUID>1500010107</GUID>
    </Item>
  </ModOp>
  <ModOp Type="add" GUID="190841,190840" Path="/Values/ItemEffect/EffectTargets">
    <Item>
      <GUID>1500010121</GUID>
    </Item>
  </ModOp>
  <ModOp Type="add" GUID="191405,191407,191404" Path="/Values/ItemEffect/EffectTargets">
    <Item>
      <GUID>1500010121</GUID>
    </Item>
  </ModOp>
  <!-- general production targets -->
  <ModOp Type="add" GUID="368,6000018,193856" Path="/Values/ItemEffectTargetPool/EffectTargetGUIDs">
    <Item>
      <GUID>1500010121</GUID>
    </Item>
    <Item>
      <GUID>1500010107</GUID>
    </Item>
  </ModOp>
  <!-- electricity -->
  <ModOp Type="add" GUID="193875" Path="/Values/ItemEffectTargetPool/EffectTargetGUIDs">
    <Item>
      <GUID>1500010121</GUID>
    </Item>
  </ModOp>
  <!-- boostable buildings -->
  <ModOp Type="add" GUID="25000087" Path="/Values/WorkforceMenu/BoostableFactories">
    <Item>
      <Factory>1500010121</Factory>
    </Item>
    <Item>
      <Factory>1500010107</Factory>
    </Item>
  </ModOp>

  <!-- # cleanup -->
  <ModOp Type="remove" Path="//ignore" />
</ModOps>
