<!--
Modular Factories
-->
<ModOps>
  <Include File="./menu.include.xml" />
  <Include File="./chemicals.include.xml" />

  <!-- # boostable buildings -->
  <ModOp Type="add" GUID="25000087" Path="/Values/WorkforceMenu/BoostableFactories">
    <Item>
      <Factory>1500010600</Factory>
    </Item>
  </ModOp>

  <!-- # Sewing Machines Variations -->
  <ModOp Type="addNextSibling" GUID="1010284">
    <Asset>
      <Template>FactoryBuilding7Variable</Template>
      <Values>
        <Standard>
          <GUID>1500010600</GUID>
          <Name>sewing_workshop</Name>
          <IconFilename>data\jakob\buildings\sewing_workshop\icon_sewing_machine.png</IconFilename>
        </Standard>
        <Building>
          <AllowChangeVariation>1</AllowChangeVariation>
          <BuildModeRandomRotation>90</BuildModeRandomRotation>
          <AssociatedRegions>Moderate</AssociatedRegions>
          <SecondPartyRelevant>0</SecondPartyRelevant>
          <BuildModeStartVariation>0</BuildModeStartVariation>
          <InfluencedByNeighbors>
            <Item>
              <Building>1500010154</Building>
            </Item>
            <Item>
              <Building>1500010600</Building>
            </Item>
          </InfluencedByNeighbors>
          <BuildingBlockPool>
            <DontCare />
            <Single />
            <Mid>
              <Pool>
                <Item>
                  <DirectionOffet>1</DirectionOffet>
                  <Variation>5</Variation>
                </Item>
                <Item>
                  <DirectionOffet>2</DirectionOffet>
                  <Variation>6</Variation>
                </Item>
              </Pool>
            </Mid>
            <Corner>
              <Pool>
                <Item>
                  <DirectionOffet>1</DirectionOffet>
                  <Variation>4</Variation>
                </Item>
                <Item>
                  <DirectionOffet>3</DirectionOffet>
                  <Variation>7</Variation>
                </Item>
              </Pool>
            </Corner>
            <End>
              <Pool>
                <!-- left side -->
                <Item>
                  <DirectionOffet>3</DirectionOffet>
                  <Variation>2</Variation>
                </Item>
                <Item>
                  <DirectionOffet>3</DirectionOffet>
                  <Variation>4</Variation>
                </Item>
              </Pool>
            </End>
            <TCrossing>
              <Pool>
                <Item>
                  <DirectionOffet>3</DirectionOffet>
                  <Variation>1</Variation>
                </Item>
                <Item>
                  <DirectionOffet>3</DirectionOffet>
                  <Variation>6</Variation>
                </Item>
                <Item>
                  <DirectionOffet>3</DirectionOffet>
                  <Variation>3</Variation>
                </Item>
              </Pool>
            </TCrossing>
            <Crossing>
              <Pool>
                <!-- right side -->
                <Item>
                  <Variation>1</Variation>
                </Item>
                <Item>
                  <Variation>6</Variation>
                </Item>
                <Item>
                  <Variation>3</Variation>
                </Item>
              </Pool>
            </Crossing>
          </BuildingBlockPool>
        </Building>
        <Blocking />
        <Cost>
          <Costs>
            <Item>
              <Ingredient>1010017</Ingredient>
              <Amount>4000</Amount>
            </Item>
            <Item>
              <Ingredient>1010196</Ingredient>
              <Amount>3</Amount>
            </Item>
            <Item>
              <Ingredient>1010205</Ingredient>
              <Amount>3</Amount>
            </Item>
            <Item>
              <Ingredient>1010218</Ingredient>
              <Amount>3</Amount>
            </Item>
            <Item>
              <Ingredient>1010207</Ingredient>
              <Amount>3</Amount>
            </Item>
            <Item>
              <Ingredient>1010202</Ingredient>
            </Item>
          </Costs>
        </Cost>
        <Object>
          <Variations>
            <Item>
              <Filename>data\jakob\buildings\sewing_workshop\building0.cfg</Filename>
            </Item>
            <Item>
              <Filename>data\jakob\buildings\sewing_workshop\building2.cfg</Filename>
            </Item>
            <Item>
              <!-- repeat to ensure selection for end is retriggered -->
              <Filename>data\jakob\buildings\sewing_workshop\building0.cfg</Filename>
            </Item>
            <Item>
              <!-- 3 -->
              <Filename>data\jakob\buildings\sewing_workshop\building15.cfg</Filename>
            </Item>
            <Item>
              <!-- 4 -->
              <Filename>data\jakob\buildings\sewing_workshop\building8.cfg</Filename>
            </Item>
            <Item>
              <!-- 5 -->
              <Filename>data\jakob\buildings\sewing_workshop\building10.cfg</Filename>
            </Item>
            <Item>
              <!-- 6 -->
              <Filename>data\jakob\buildings\sewing_workshop\building13.cfg</Filename>
            </Item>
            <Item>
              <!-- 7 -->
              <Filename>data\jakob\buildings\sewing_workshop\building12.cfg</Filename>
            </Item>
          </Variations>
        </Object>
        <Mesh />
        <Selection>
          <ParticipantMessageArcheType>Resident_tier03_atWork</ParticipantMessageArcheType>
          <Colors>
            <WeakSelectionColorType>NoColor</WeakSelectionColorType>
          </Colors>
        </Selection>
        <Constructable />
        <Locked />
        <SoundEmitter>
          <ActiveSounds>
            <Item>
              <Sound>239444</Sound>
            </Item>
            <Item>
              <Sound>239332</Sound>
            </Item>
          </ActiveSounds>
          <IncidentSounds>
            <InfectedFire>
              <Item>
                <Sound>214659</Sound>
              </Item>
            </InfectedFire>
          </IncidentSounds>
        </SoundEmitter>
        <FeedbackController />
        <Infolayer />
        <UpgradeList />
        <Factory7 />
        <FactoryBase>
          <FactoryInputs>
            <Item>
              <Product>120008</Product>
              <Amount>1</Amount>
              <StorageAmount>8</StorageAmount>
            </Item>
            <Item>
              <Product>1010219</Product>
              <Amount>1</Amount>
              <StorageAmount>6</StorageAmount>
            </Item>
          </FactoryInputs>
          <FactoryOutputs>
            <Item>
              <Product>1010206</Product>
              <Amount>1</Amount>
              <StorageAmount>4</StorageAmount>
            </Item>
          </FactoryOutputs>
          <CycleTime>90</CycleTime>
          <IsMainFactory>0</IsMainFactory>
        </FactoryBase>
        <LogisticNode>
          <TransporterCountMax>1</TransporterCountMax>
        </LogisticNode>
        <AmbientMoodProvider>
          <Murmur>Factory</Murmur>
          <DynamicEnvironmentType>None</DynamicEnvironmentType>
        </AmbientMoodProvider>
        <Maintenance>
          <Maintenances>
            <Item>
              <Product>1010017</Product>
              <Amount>170</Amount>
              <InactiveAmount>85</InactiveAmount>
            </Item>
            <Item>
              <Product>1010116</Product>
              <Amount>50</Amount>
            </Item>
          </Maintenances>
        </Maintenance>
        <Attackable>
          <MaximumHitPoints>2500</MaximumHitPoints>
          <SelfHealPerHealTick>6</SelfHealPerHealTick>
        </Attackable>
        <Pausable />
        <IncidentInfectable>
          <Infectable>
            <Explosion>
              <Base>0</Base>
              <Escalated>0</Escalated>
            </Explosion>
          </Infectable>
          <Explosion>
            <ExplosionCoreDamage>1000</ExplosionCoreDamage>
          </Explosion>
          <IncidentInfectionChanceFactors>
            <Fire>
              <DensityDistance>20</DensityDistance>
              <FactoryProductivityFactor>0.1</FactoryProductivityFactor>
              <FactoryUndertimeFactor>0.05</FactoryUndertimeFactor>
            </Fire>
            <Riot>
              <FactoryOvertimeFactor>0.4</FactoryOvertimeFactor>
              <FactoryUndertimeFactor>0.2</FactoryUndertimeFactor>
              <FactoryHappinessFactor>0.2</FactoryHappinessFactor>
              <HappinessThreshold>20</HappinessThreshold>
            </Riot>
          </IncidentInfectionChanceFactors>
        </IncidentInfectable>
        <Industrializable />
        <Culture>
          <CultureType>Culture</CultureType>
        </Culture>
        <Electrifiable />
      </Values>
    </Asset>
    <Asset>
      <Template>Trigger</Template>
      <Values>
        <Standard>
          <GUID>1500010603</GUID>
          <Name>Relock Sewing Workshop</Name>
        </Standard>
        <Trigger>
          <TriggerCondition>
            <Template>ConditionPlayerCounter</Template>
            <Values>
              <Condition />
              <ConditionPlayerCounter>
                <PlayerCounter>PopulationByLevel</PlayerCounter>
                <Context>1500010600</Context>
                <ComparisonOp>Equals</ComparisonOp>
                <CounterAmount>0</CounterAmount>
              </ConditionPlayerCounter>
            </Values>
          </TriggerCondition>
          <TriggerActions>
            <Item>
              <TriggerAction>
                <Template>ActionLockAsset</Template>
                <Values>
                  <Action />
                  <ActionLockAsset>
                    <LockAssets>
                      <Item>
                        <Asset>1500010600</Asset>
                      </Item>
                    </LockAssets>
                  </ActionLockAsset>
                </Values>
              </TriggerAction>
            </Item>
            <Item>
              <TriggerAction>
                <Template>ActionRegisterTrigger</Template>
                <Values>
                  <Action />
                  <ActionRegisterTrigger>
                    <TriggerAsset>1500010604</TriggerAsset>
                  </ActionRegisterTrigger>
                </Values>
              </TriggerAction>
            </Item>
          </TriggerActions>
        </Trigger>
        <TriggerSetup>
          <UsedBySecondParties>0</UsedBySecondParties>
        </TriggerSetup>
      </Values>
    </Asset>
    <Asset>
      <Template>Trigger</Template>
      <Values>
        <Standard>
          <GUID>1500010604</GUID>
          <Name>Unlock @ Sewing Machines Factory</Name>
        </Standard>
        <Trigger>
          <TriggerCondition>
            <Template>ConditionUnlocked</Template>
            <Values>
              <Condition />
              <ConditionUnlocked>
                <UnlockNeeded>1010284</UnlockNeeded>
              </ConditionUnlocked>
            </Values>
          </TriggerCondition>
          <TriggerActions>
            <Item>
              <TriggerAction>
                <Template>ActionUnlockAsset</Template>
                <Values>
                  <Action />
                  <ActionUnlockAsset>
                    <UnlockAssets>
                      <Item>
                        <Asset>1500010600</Asset>
                      </Item>
                    </UnlockAssets>
                  </ActionUnlockAsset>
                </Values>
              </TriggerAction>
            </Item>
          </TriggerActions>
        </Trigger>
        <TriggerSetup>
          <UsedBySecondParties>0</UsedBySecondParties>
        </TriggerSetup>
      </Values>
    </Asset>
  </ModOp>
  <ModOp Type="add" GUID="500003" Path="/Values/ProductionChain/Tier1">
    <Item>
      <Building>1500010600</Building>
    </Item>
  </ModOp>
  <ModOp Type="add" GUID="142311" Path="/Values/FeedbackBuildingGroup/Buildings">
    <Item>
      <Building>1500010600</Building>
    </Item>
  </ModOp>
  <ModOp Type="add" Path="//ItemEffectTargetPool/EffectTargetGUIDs[Item/GUID='1010284']">
    <Item>
      <GUID>1500010600</GUID>
    </Item>
  </ModOp>

  <!-- # Neighbors -->
  <ModOp Type="add" GUID="1500010154,1500010600,1500011270,1500011271" Condition="~"
    Path="/Values/Building/InfluencedByNeighbors">
    <Item>
      <Building>1500011270</Building>
    </Item>
    <Item>
      <Building>1500011271</Building>
    </Item>
  </ModOp>
</ModOps>
