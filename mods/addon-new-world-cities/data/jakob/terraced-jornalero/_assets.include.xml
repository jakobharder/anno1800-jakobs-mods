<ModOps>
  <!-- # Terraced Jornalero -->
  <Group>
    <ModOp Type="addNextSibling" GUID="101255">
      <Asset>
        <Template>ResidenceBuilding7_Colony</Template>
        <Values>
          <Standard>
            <GUID>1500011250</GUID>
            <Name>Terraced Jornalero</Name>
            <IconFilename>data/ui/jakob/icon_terraced_jornalero.png</IconFilename>
            <InfoDescription>163059</InfoDescription>
          </Standard>
          <Building>
            <BuildingType>Residence</BuildingType>
            <PickingAsset>101254</PickingAsset>
            <SecondPartyRelevant>0</SecondPartyRelevant>
            <AssociatedRegions>Colony01</AssociatedRegions>
            <BuildingCategoryName>1500011055</BuildingCategoryName>
            <AllowChangeVariation>1</AllowChangeVariation>
            <BuildingBlockPool>
              <!--
                Multiple entries of the same variation for different rotations don't work.
                But vanilla assets.xml also defines them, so they were supposed to work at some point.
              -->
              <Corner>
                <Pool>
                  <Item>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                  <Item>
                    <Variation>1</Variation>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                  <Item>
                    <Variation>2</Variation>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                  <Item>
                    <Variation>3</Variation>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                  <!-- <Item>
                    <Variation>4</Variation>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                  <Item>
                    <Variation>5</Variation>
                    <DirectionOffet>2</DirectionOffet>
                  </Item> -->
                </Pool>
              </Corner>
              <Mid>
                <Pool>
                  <Item>
                    <Variation>4</Variation>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                  <Item>
                    <Variation>5</Variation>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                  <Item>
                    <Variation>6</Variation>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                  <Item>
                    <Variation>7</Variation>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                </Pool>
              </Mid>
              <End>
                <Pool>
                  <Item>
                    <Variation>8</Variation>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                  <Item>
                    <Variation>9</Variation>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                  <Item>
                    <Variation>10</Variation>
                  </Item>
                  <Item>
                    <Variation>11</Variation>
                  </Item>
                </Pool>
              </End>
            </BuildingBlockPool>
          </Building>
          <Cost>
            <Costs>
              <Item>
                <Ingredient>1010196</Ingredient>
                <Amount>2</Amount>
              </Item>
              <Item>
                <Ingredient>1010205</Ingredient>
                <Amount>1</Amount>
              </Item>
            </Costs>
          </Cost>
          <Object>
            <Variations>
              <!-- corners -->
              <Item>
                <Filename>data\jakob\terraced-jornalero\jornalero_3.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\terraced-jornalero\jornalero_3b.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\terraced-jornalero\jornalero_4.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\terraced-jornalero\jornalero_6.cfg</Filename>
              </Item>
              <!-- straights -->
              <Item>
                <Filename>data\jakob\terraced-jornalero\jornalero_2.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\terraced-jornalero\jornalero_1.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\terraced-jornalero\jornalero_5.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\terraced-jornalero\jornalero_7.cfg</Filename>
              </Item>
              <!-- end -->
              <Item>
                <Filename>data\jakob\terraced-jornalero\jornalero_4.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\terraced-jornalero\jornalero_6.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\terraced-jornalero\jornalero_5.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\terraced-jornalero\jornalero_7.cfg</Filename>
              </Item>
            </Variations>
          </Object>
          <Selection>
            <ParticipantMessageArcheType>SA_Resident_tier01</ParticipantMessageArcheType>
          </Selection>
          <Locked>
            <DefaultLockedState>1</DefaultLockedState>
          </Locked>
          <Upgradable>
            <CurrentTier>1</CurrentTier>
            <NextGUID>1500011043</NextGUID>
            <UpgradeCost>
              <Costs>
                <Item>
                  <Ingredient>1010196</Ingredient>
                  <Amount>2</Amount>
                </Item>
                <Item>
                  <Ingredient>1010205</Ingredient>
                  <Amount>1</Amount>
                </Item>
              </Costs>
            </UpgradeCost>
          </Upgradable>
          <SoundEmitter>
            <BuildingRepaired>
              <Item>
                <Sound>203866</Sound>
              </Item>
            </BuildingRepaired>
            <MaterialType>Stone</MaterialType>
          </SoundEmitter>
          <Residence7>
            <ResidenceStorage>
              <InputStorageMax>1</InputStorageMax>
            </ResidenceStorage>
            <PopulationLevel7>15000005</PopulationLevel7>
            <ResidentMax>25</ResidentMax>
            <ResidentsRequiredForUpgrade>25</ResidentsRequiredForUpgrade>
            <IsBaseResidence>0</IsBaseResidence>
            <MoveInMs>8000</MoveInMs>
          </Residence7>
          <AmbientMoodProvider>
            <DynamicEnvironmentType>ResidenceT1</DynamicEnvironmentType>
            <HappinessDependentMurmur>
              <Angry>
                <Murmur>JornaleroUnhappy</Murmur>
              </Angry>
              <Unhappy>
                <Murmur>JornaleroContent</Murmur>
              </Unhappy>
              <Neutral>
                <Murmur>JornaleroContent</Murmur>
              </Neutral>
              <Happy>
                <Murmur>JornaleroHappy</Murmur>
              </Happy>
              <Euphoric>
                <Murmur>JornaleroHappy</Murmur>
              </Euphoric>
            </HappinessDependentMurmur>
          </AmbientMoodProvider>
          <Attackable>
            <AttackableType>IslandBuilding</AttackableType>
            <MaximumHitPoints>3000</MaximumHitPoints>
          </Attackable>
          <IncidentInfectable>
            <Infectable>
              <Explosion>
                <Base>0</Base>
                <Escalated>0</Escalated>
              </Explosion>
            </Infectable>
            <Explosion>
              <ExplosionCoreDamage>1000</ExplosionCoreDamage>
            </Explosion>
            <IncidentInfectionChanceFactors>
              <Fire>
                <BaseChance>3.5</BaseChance>
                <DensityFactor>0.025</DensityFactor>
                <DensityDistance>15</DensityDistance>
              </Fire>
              <Riot>
                <ResidenceHappinessFactor>0.4</ResidenceHappinessFactor>
                <HappinessThreshold>10</HappinessThreshold>
              </Riot>
              <Illness>
                <BaseChance>3.5</BaseChance>
                <HitpointFactor>0.1</HitpointFactor>
                <DensityFactor>0.025</DensityFactor>
                <DensityDistance>15</DensityDistance>
                <DilapidatedFactor>10</DilapidatedFactor>
                <FactoryOvertimeFactor>0.3</FactoryOvertimeFactor>
                <FactoryUndertimeFactor>0.15</FactoryUndertimeFactor>
                <ResidenceFullOvertimeChance>20</ResidenceFullOvertimeChance>
                <ResidenceFullUndertimeChance>-15</ResidenceFullUndertimeChance>
              </Illness>
              <Explosion>
                <ResidenceFullOvertimeChance>20</ResidenceFullOvertimeChance>
                <ResidenceFullUndertimeChance>-15</ResidenceFullUndertimeChance>
              </Explosion>
            </IncidentInfectionChanceFactors>
          </IncidentInfectable>
        </Values>
      </Asset>
    </ModOp>
    <!-- add spawn feeback -->
    <ModOp GUID="142785,2001013" Type="add" Path="/Values/FeedbackBuildingGroup/Buildings">
      <Item>
        <Building>1500011250</Building>
      </Item>
      <Item>
        <Building>1500011380</Building>
      </Item>
    </ModOp>
  </Group>

  <!-- # Harbor Life Support -->
  <Group>
    <ModOp Type="addNextSibling" GUID="1500011250">
      <Asset>
        <BaseAssetGUID>1500011250</BaseAssetGUID>
        <Values>
          <Standard>
            <GUID>1500011380</GUID>
            <Name>Terraced Jornalero Harbor</Name>
            <IconFilename>data/ui/jakob/icon_terraced_jornalero.png</IconFilename>
          </Standard>
          <Building>
            <PickingAsset>8856001</PickingAsset>
            <TerrainType>Water_Including_Coast</TerrainType>
            <BuildingCategoryName>1500011055</BuildingCategoryName>
          </Building>
          <Blocking>
            <GroundDecalAsset>132528</GroundDecalAsset>
            <GroundDecalInvisible>132529</GroundDecalInvisible>
            <HasBuildingBaseTiles>1</HasBuildingBaseTiles>
          </Blocking>
          <Cost />
          <Object>
            <Variations>
              <!-- corners -->
              <Item>
                <Filename>data\jakob\harborlife\jornalero_3.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\harborlife\jornalero_3b.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\harborlife\jornalero_4.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\harborlife\jornalero_6.cfg</Filename>
              </Item>
              <!-- straights -->
              <Item>
                <Filename>data\jakob\harborlife\jornalero_2.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\harborlife\jornalero_1.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\harborlife\jornalero_5.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\harborlife\jornalero_7.cfg</Filename>
              </Item>
              <!-- end -->
              <Item>
                <Filename>data\jakob\harborlife\jornalero_4.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\harborlife\jornalero_6.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\harborlife\jornalero_5.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\harborlife\jornalero_7.cfg</Filename>
              </Item>
            </Variations>
          </Object>
          <Locked />
          <Upgradable>
            <CurrentTier>1</CurrentTier>
            <NextGUID>1500011381</NextGUID>
            <UpgradeCost>
              <Costs>
                <Item>
                  <Ingredient>1010196</Ingredient>
                  <Amount>2</Amount>
                </Item>
                <Item>
                  <Ingredient>1010205</Ingredient>
                  <Amount>1</Amount>
                </Item>
              </Costs>
            </UpgradeCost>
          </Upgradable>
          <SoundEmitter />
          <Residence7 />
          <AmbientMoodProvider />
          <Attackable>
            <AttackableType>HarbourBuilding</AttackableType>
            <MaximumHitPoints>600</MaximumHitPoints>
            <DefenseByAIFactor>0</DefenseByAIFactor>
            <MoralePower>0</MoralePower>
          </Attackable>
          <IncidentInfectable />
        </Values>
      </Asset>
    </ModOp>
    <ModOp Condition="#Spice_Harborlife"
      Type="merge" GUID="8856006" Path="/Values">
      <FloorStackOwner>
        <UpgradeTargetGUID>1500011380</UpgradeTargetGUID>
        <AddFloorCost>
          <Item>
            <Ingredient>1010196</Ingredient>
            <Amount>2</Amount>
          </Item>
          <Item>
            <Ingredient>1010205</Ingredient>
            <Amount>1</Amount>
          </Item>
        </AddFloorCost>
      </FloorStackOwner>
    </ModOp>
    <Group Condition="@1500011564/InstantResidences">
      <ModOp Condition="#Spice_Harborlife"
        Type="addPrevSibling" GUID="8855889"
        Path="/Values/ConstructionCategory/BuildingList/Item[Building='8856017']">
        <Item>
          <Building>1500011380</Building>
        </Item>
      </ModOp>
    </Group>
  </Group>

  <!-- # Needs -->
  <Group>
    <ModOp GUID="15000005" Type="add"
      Path="/Values/PopulationLevel7/PopulationInputs/Item[Product='120020']/RequiredBuildings">
      <Item>
        <RequiredBuilding>1500011250</RequiredBuilding>
      </Item>
      <Item>
        <RequiredBuilding>1500011380</RequiredBuilding>
      </Item>
    </ModOp>
    <ModOp GUID="15000005" Type="add" Path="/Values/PopulationLevel7/PopulationInputs">
      <Item>
        <Product>120035</Product>
        <Amount>0.0002083</Amount>
        <SupplyWeight>5</SupplyWeight>
        <MoneyValue>25</MoneyValue>
        <FullWeightPopulationCount>700</FullWeightPopulationCount>
        <NoWeightPopulationCount>399</NoWeightPopulationCount>
        <ExcludePopulationFromMoneyAndConsumptionCalculation>1</ExcludePopulationFromMoneyAndConsumptionCalculation>
        <RequiredBuildings>
          <Item>
            <RequiredBuilding>1500011250</RequiredBuilding>
          </Item>
          <Item>
            <RequiredBuilding>1500011380</RequiredBuilding>
          </Item>
        </RequiredBuildings>
      </Item>
      <Item>
        <Product>1010213</Product>
        <Amount>0.0002083</Amount>
        <SupplyWeight>5</SupplyWeight>
        <MoneyValue>25</MoneyValue>
        <FullWeightPopulationCount>1000</FullWeightPopulationCount>
        <NoWeightPopulationCount>499</NoWeightPopulationCount>
        <ExcludePopulationFromMoneyAndConsumptionCalculation>1</ExcludePopulationFromMoneyAndConsumptionCalculation>
        <RequiredBuildings>
          <Item>
            <RequiredBuilding>1500011250</RequiredBuilding>
          </Item>
          <Item>
            <RequiredBuilding>1500011380</RequiredBuilding>
          </Item>
        </RequiredBuildings>
      </Item>
      <Item>
        <Product>1500010102</Product>
        <Amount>0.0002083</Amount>
        <SupplyWeight>5</SupplyWeight>
        <MoneyValue>25</MoneyValue>
        <FullWeightPopulationCount>1200</FullWeightPopulationCount>
        <NoWeightPopulationCount>599</NoWeightPopulationCount>
        <ExcludePopulationFromMoneyAndConsumptionCalculation>1</ExcludePopulationFromMoneyAndConsumptionCalculation>
        <RequiredBuildings>
          <Item>
            <RequiredBuilding>1500011250</RequiredBuilding>
          </Item>
          <Item>
            <RequiredBuilding>1500011380</RequiredBuilding>
          </Item>
        </RequiredBuildings>
      </Item>
      <Item>
        <Product>133183</Product>
        <Amount>0.0002083</Amount>
        <SupplyWeight>5</SupplyWeight>
        <MoneyValue>25</MoneyValue>
        <ExcludePopulationFromMoneyAndConsumptionCalculation>1</ExcludePopulationFromMoneyAndConsumptionCalculation>
        <IsBonusNeed>1</IsBonusNeed>
        <RequiredBuildings>
          <Item>
            <RequiredBuilding>1500011250</RequiredBuilding>
          </Item>
          <Item>
            <RequiredBuilding>1500011380</RequiredBuilding>
          </Item>
        </RequiredBuildings>
      </Item>
    </ModOp>
  </Group>

  <!-- # Targets -->
  <Group>
    <ModOp Type="add"
      Path="//ItemEffectTargetPool/EffectTargetGUIDs[Item/GUID='101254']">
      <Item>
        <GUID>1500011250</GUID>
      </Item>
      <Item>
        <GUID>1500011380</GUID>
      </Item>
    </ModOp>
    <ModOp Type="add"
      Path="//ItemEffect/EffectTargets[Item/GUID='101254']">
      <Item>
        <GUID>1500011250</GUID>
      </Item>
      <Item>
        <GUID>1500011380</GUID>
      </Item>
    </ModOp>
  </Group>

  <!-- # Build Menus -->
  <!--
    Add as floor upgrade to Jornaleros. Possible without a crash since 18.1.
    Downgrade will automatically prefer non-floor upgrades.
  -->
  <ModOp Type="merge" GUID="101254" Path="/Values">
    <FloorStackOwner>
      <UpgradeTargetGUID>1500011250</UpgradeTargetGUID>
      <AddFloorCost>
        <Item>
          <Ingredient>1010196</Ingredient>
          <Amount>2</Amount>
        </Item>
        <Item>
          <Ingredient>1010205</Ingredient>
          <Amount>1</Amount>
        </Item>
      </AddFloorCost>
    </FloorStackOwner>
  </ModOp>
</ModOps>
