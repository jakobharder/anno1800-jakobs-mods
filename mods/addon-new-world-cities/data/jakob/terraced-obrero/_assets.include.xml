<ModOps>
  <!-- # Terraced Obreros -->
  <Group>
    <ModOp Type="addNextSibling" GUID="101255">
      <Asset>
        <Template>ResidenceBuilding7_Colony</Template>
        <Values>
          <Standard>
            <GUID>1500011043</GUID>
            <Name>Terraced Obreros</Name>
            <IconFilename>data/ui/jakob/icon_terraced_obrera.png</IconFilename>
            <InfoDescription>163059</InfoDescription>
          </Standard>
          <Building>
            <BuildingType>Residence</BuildingType>
            <PickingAsset>101254</PickingAsset>
            <SecondPartyRelevant>0</SecondPartyRelevant>
            <AssociatedRegions>Colony01</AssociatedRegions>
            <BuildingCategoryName>1500011055</BuildingCategoryName>
            <AllowChangeVariation>1</AllowChangeVariation>
            <BuildingBlockPool>
              <!--
                Multiple entries of the same variation for different rotations don't work.
                But vanilla assets.xml also defines them, so they were supposed to work at some point.
              -->
              <Corner>
                <Pool>
                  <Item>
                    <Variation>8</Variation>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                  <Item>
                    <Variation>9</Variation>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                  <Item>
                    <Variation>10</Variation>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                  <Item>
                    <Variation>11</Variation>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                  <Item>
                    <Variation>12</Variation>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                  <Item>
                    <Variation>13</Variation>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                </Pool>
              </Corner>
              <Mid>
                <Pool>
                  <Item>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                  <Item>
                    <Variation>1</Variation>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                  <Item>
                    <Variation>2</Variation>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                  <Item>
                    <Variation>3</Variation>
                    <DirectionOffet>2</DirectionOffet>
                  </Item>
                </Pool>
              </Mid>
              <End>
                <Pool>
                  <Item>
                    <Variation>4</Variation>
                  </Item>
                  <Item>
                    <Variation>5</Variation>
                  </Item>
                  <Item>
                    <Variation>6</Variation>
                  </Item>
                  <Item>
                    <Variation>7</Variation>
                  </Item>
                </Pool>
              </End>
            </BuildingBlockPool>
          </Building>
          <Cost>
            <Costs>
              <Item>
                <Ingredient>1010196</Ingredient>
                <Amount>4</Amount>
              </Item>
              <Item>
                <Ingredient>1010205</Ingredient>
                <Amount>2</Amount>
              </Item>
            </Costs>
          </Cost>
          <Object>
            <Variations>
              <!-- straights -->
              <Item>
                <Filename>data\jakob\terraced-obrero\obrero_scraper1.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\terraced-obrero\obrero_scraper2.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\terraced-obrero\obrero_scraper2b.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\terraced-obrero\obrero_scraper2c.cfg</Filename>
              </Item>
              <!-- end -->
              <Item>
                <Filename>data\jakob\terraced-obrero\obrero_scraper1.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\terraced-obrero\obrero_scraper2.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\terraced-obrero\obrero_scraper2b.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\terraced-obrero\obrero_scraper2c.cfg</Filename>
              </Item>
              <!-- corners -->
              <Item>
                <Filename>data\jakob\terraced-obrero\obrero_scraper3.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\terraced-obrero\obrero_scraper4.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\terraced-obrero\obrero_scraper3b.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\terraced-obrero\obrero_scraper5.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\terraced-obrero\obrero_scraper6.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\terraced-obrero\obrero_scraper6b.cfg</Filename>
              </Item>
            </Variations>
          </Object>
          <Selection>
            <ParticipantMessageArcheType>SA_Resident_tier02</ParticipantMessageArcheType>
          </Selection>
          <Locked>
            <DefaultLockedState>1</DefaultLockedState>
          </Locked>
          <Upgradable>
            <CurrentTier>2</CurrentTier>
            <NextGUID>1500011044</NextGUID>
            <UpgradeCost>
              <Item>
                <Ingredient>1010196</Ingredient>
                <Amount>4</Amount>
              </Item>
              <Item>
                <Ingredient>1010205</Ingredient>
                <Amount>2</Amount>
              </Item>
              <Item>
                <Ingredient>838</Ingredient>
                <Amount>1</Amount>
              </Item>
            </UpgradeCost>
          </Upgradable>
          <SoundEmitter>
            <BuildingRepaired>
              <Item>
                <Sound>203866</Sound>
              </Item>
            </BuildingRepaired>
            <MaterialType>Stone</MaterialType>
          </SoundEmitter>
          <Residence7>
            <ResidenceStorage>
              <InputStorageMax>1</InputStorageMax>
            </ResidenceStorage>
            <PopulationLevel7>15000006</PopulationLevel7>
            <ResidentMax>35</ResidentMax>
            <ResidentsRequiredForUpgrade>35</ResidentsRequiredForUpgrade>
            <IsBaseResidence>0</IsBaseResidence>
            <MoveInMs>8000</MoveInMs>
          </Residence7>
          <AmbientMoodProvider>
            <DynamicEnvironmentType>ResidenceT1</DynamicEnvironmentType>
            <HappinessDependentMurmur>
              <Angry>
                <Murmur>OberaUnhappy</Murmur>
              </Angry>
              <Unhappy>
                <Murmur>OberaContent</Murmur>
              </Unhappy>
              <Neutral>
                <Murmur>OberaContent</Murmur>
              </Neutral>
              <Happy>
                <Murmur>OberaHappy</Murmur>
              </Happy>
              <Euphoric>
                <Murmur>OberaHappy</Murmur>
              </Euphoric>
            </HappinessDependentMurmur>
          </AmbientMoodProvider>
          <Attackable>
            <AttackableType>IslandBuilding</AttackableType>
            <MaximumHitPoints>3000</MaximumHitPoints>
          </Attackable>
          <IncidentInfectable>
            <Infectable>
              <Explosion>
                <Base>0</Base>
                <Escalated>0</Escalated>
              </Explosion>
            </Infectable>
            <Explosion>
              <ExplosionCoreDamage>1000</ExplosionCoreDamage>
            </Explosion>
            <IncidentInfectionChanceFactors>
              <Fire>
                <BaseChance>3.5</BaseChance>
                <DensityFactor>0.025</DensityFactor>
                <DensityDistance>15</DensityDistance>
              </Fire>
              <Riot>
                <ResidenceHappinessFactor>0.4</ResidenceHappinessFactor>
                <HappinessThreshold>10</HappinessThreshold>
              </Riot>
              <Illness>
                <BaseChance>3.5</BaseChance>
                <HitpointFactor>0.1</HitpointFactor>
                <DensityFactor>0.025</DensityFactor>
                <DensityDistance>15</DensityDistance>
                <DilapidatedFactor>10</DilapidatedFactor>
                <FactoryOvertimeFactor>0.3</FactoryOvertimeFactor>
                <FactoryUndertimeFactor>0.15</FactoryUndertimeFactor>
                <ResidenceFullOvertimeChance>20</ResidenceFullOvertimeChance>
                <ResidenceFullUndertimeChance>-15</ResidenceFullUndertimeChance>
              </Illness>
              <Explosion>
                <ResidenceFullOvertimeChance>20</ResidenceFullOvertimeChance>
                <ResidenceFullUndertimeChance>-15</ResidenceFullUndertimeChance>
              </Explosion>
            </IncidentInfectionChanceFactors>
          </IncidentInfectable>
        </Values>
      </Asset>
    </ModOp>
    <!-- <ModOp Type="merge" GUID="1010345" Path="/Values">
      <Upgradable>
        <NextGUID>1500011043</NextGUID>
      </Upgradable>
    </ModOp>
    <ModOp Type="add" GUID="5405" Path="/Values">
      <Upgradable>
        <NextGUID>1500011044</NextGUID>
      </Upgradable>
    </ModOp> -->
    <!-- <ModOp Type="merge" GUID="5405" Path="/Values">
      <Residence7>
        <ResidentsRequiredForUpgrade>20</ResidentsRequiredForUpgrade>
      </Residence7>
    </ModOp> -->

    <ModOp Type="add" GUID="15000006" Path="/Values/PopulationLevel7/PopulationInputs/Item[Product='120020']/RequiredBuildings">
      <Item>
        <RequiredBuilding>1500011043</RequiredBuilding>
      </Item>
    </ModOp>
    <!-- add spawn feeback -->
    <ModOp GUID="142785,2001089" Type="add" Path="/Values/FeedbackBuildingGroup/Buildings">
      <Item>
        <Building>1500011043</Building>
      </Item>
      <Item>
        <Building>1500011381</Building>
      </Item>
    </ModOp>
  </Group>

  <!-- # Harbor Life Support -->
  <Group>
    <ModOp Type="addNextSibling" GUID="1500011043">
      <Asset>
        <BaseAssetGUID>1500011043</BaseAssetGUID>
        <Values>
          <Standard>
            <GUID>1500011381</GUID>
            <Name>Terraced Obrero Harbor</Name>
            <IconFilename>data/ui/jakob/icon_terraced_obrera.png</IconFilename>
          </Standard>
          <Building>
            <PickingAsset>8856001</PickingAsset>
            <TerrainType>Water_Including_Coast</TerrainType>
          </Building>
          <Blocking>
            <GroundDecalAsset>132528</GroundDecalAsset>
            <GroundDecalInvisible>132529</GroundDecalInvisible>
            <HasBuildingBaseTiles>1</HasBuildingBaseTiles>
            <BuildingCategoryName>1500011055</BuildingCategoryName>
          </Blocking>
          <Cost />
          <Object>
            <Variations>
              <!-- straights -->
              <Item>
                <Filename>data\jakob\harborlife\obrero_scraper1.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\harborlife\obrero_scraper2.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\harborlife\obrero_scraper2b.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\harborlife\obrero_scraper2c.cfg</Filename>
              </Item>
              <!-- end -->
              <Item>
                <Filename>data\jakob\harborlife\obrero_scraper1.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\harborlife\obrero_scraper2.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\harborlife\obrero_scraper2b.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\harborlife\obrero_scraper2c.cfg</Filename>
              </Item>
              <!-- corners -->
              <Item>
                <Filename>data\jakob\harborlife\obrero_scraper3.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\harborlife\obrero_scraper4.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\harborlife\obrero_scraper3b.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\harborlife\obrero_scraper5.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\harborlife\obrero_scraper6.cfg</Filename>
              </Item>
              <Item>
                <Filename>data\jakob\harborlife\obrero_scraper6b.cfg</Filename>
              </Item>
            </Variations>
          </Object>
          <Locked />
          <Upgradable>
            <CurrentTier>2</CurrentTier>
            <NextGUID>1500011382</NextGUID>
            <UpgradeCost>
              <Item>
                <Ingredient>1010196</Ingredient>
                <Amount>4</Amount>
              </Item>
              <Item>
                <Ingredient>1010205</Ingredient>
                <Amount>2</Amount>
              </Item>
              <Item>
                <Ingredient>838</Ingredient>
                <Amount>1</Amount>
              </Item>
            </UpgradeCost>
          </Upgradable>
          <SoundEmitter />
          <Residence7 />
          <AmbientMoodProvider />
          <Attackable>
            <AttackableType>HarbourBuilding</AttackableType>
            <MaximumHitPoints>600</MaximumHitPoints>
            <DefenseByAIFactor>0</DefenseByAIFactor>
            <MoralePower>0</MoralePower>
          </Attackable>
          <IncidentInfectable />
        </Values>
      </Asset>
    </ModOp>
    <ModOp Condition="#Spice_Harborlife"
      Type="merge" GUID="8856007" Path="/Values">
      <FloorStackOwner>
        <UpgradeTargetGUID>1500011381</UpgradeTargetGUID>
        <AddFloorCost>
          <Item>
            <Ingredient>1010196</Ingredient>
            <Amount>1</Amount>
          </Item>
          <Item>
            <Ingredient>1010205</Ingredient>
            <Amount>2</Amount>
          </Item>
        </AddFloorCost>
      </FloorStackOwner>
    </ModOp>
    <Group Condition="@1500011564/InstantResidences">
      <ModOp Condition="#Spice_Harborlife"
        Type="addPrevSibling" GUID="8855889"
        Path="/Values/ConstructionCategory/BuildingList/Item[Building='8856017']">
        <Item>
          <Building>1500011381</Building>
        </Item>
      </ModOp>
    </Group>
  </Group>

  <!-- # Needs -->
  <Group>
    <ModOp GUID="15000006" Type="add" Path="/Values/PopulationLevel7/PopulationInputs">
      <Item>
        <Product>1010213</Product>
        <Amount>0.00047619</Amount>
        <SupplyWeight>5</SupplyWeight>
        <MoneyValue>20</MoneyValue>
        <ExcludePopulationFromMoneyAndConsumptionCalculation>1</ExcludePopulationFromMoneyAndConsumptionCalculation>
        <RequiredBuildings>
          <Item>
            <RequiredBuilding>1500011043</RequiredBuilding>
          </Item>
          <Item>
            <RequiredBuilding>1500011381</RequiredBuilding>
          </Item>
        </RequiredBuildings>
      </Item>
      <Item>
        <Product>1500010102</Product>
        <Amount>0.00047619</Amount>
        <SupplyWeight>5</SupplyWeight>
        <MoneyValue>20</MoneyValue>
        <ExcludePopulationFromMoneyAndConsumptionCalculation>1</ExcludePopulationFromMoneyAndConsumptionCalculation>
        <RequiredBuildings>
          <Item>
            <RequiredBuilding>1500011043</RequiredBuilding>
          </Item>
          <Item>
            <RequiredBuilding>1500011381</RequiredBuilding>
          </Item>
        </RequiredBuildings>
      </Item>
      <Item>
        <Product>133183</Product>
        <Amount>0.00047619</Amount>
        <SupplyWeight>5</SupplyWeight>
        <MoneyValue>20</MoneyValue>
        <ExcludePopulationFromMoneyAndConsumptionCalculation>1</ExcludePopulationFromMoneyAndConsumptionCalculation>
        <IsBonusNeed>1</IsBonusNeed>
        <RequiredBuildings>
          <Item>
            <RequiredBuilding>1500011043</RequiredBuilding>
          </Item>
          <Item>
            <RequiredBuilding>1500011381</RequiredBuilding>
          </Item>
        </RequiredBuildings>
      </Item>
      <Item>
        <Product>1010354</Product>
        <SupplyWeight>5</SupplyWeight>
        <MoneyValue>10</MoneyValue>
        <ExcludePopulationFromMoneyAndConsumptionCalculation>1</ExcludePopulationFromMoneyAndConsumptionCalculation>
        <RequiredBuildings>
          <Item>
            <RequiredBuilding>1500011043</RequiredBuilding>
          </Item>
          <Item>
            <RequiredBuilding>1500011381</RequiredBuilding>
          </Item>
        </RequiredBuildings>
      </Item>
    </ModOp>
  </Group>

  <!-- # Targets -->
  <Group>
    <ModOp Type="add"
      Path="//ItemEffectTargetPool/EffectTargetGUIDs[Item/GUID='101255']">
      <Item>
        <GUID>1500011043</GUID>
      </Item>
      <Item>
        <GUID>1500011381</GUID>
      </Item>
    </ModOp>
    <ModOp Type="add"
      Path="//ItemEffect/EffectTargets[Item/GUID='101255']">
      <Item>
        <GUID>1500011043</GUID>
      </Item>
      <Item>
        <GUID>1500011381</GUID>
      </Item>
    </ModOp>
  </Group>

  <!-- # Build Menus -->
  <!--
    Add as floor upgrade to Obreros. Possible without a crash since 18.1.
    Downgrade will automatically prefer non-floor upgrades.
  -->
  <ModOp Type="merge" GUID="101255" Path="/Values">
    <FloorStackOwner>
      <UpgradeTargetGUID>1500011043</UpgradeTargetGUID>
      <AddFloorCost>
        <Item>
          <Ingredient>1010196</Ingredient>
          <Amount>1</Amount>
        </Item>
        <Item>
          <Ingredient>1010205</Ingredient>
          <Amount>2</Amount>
        </Item>
      </AddFloorCost>
    </FloorStackOwner>
  </ModOp>

  <ModOp Type="add" GUID="269492"
    Path=".//EffectTargets[Item/GUID='1010516']">
    <Item>
        <GUID>1554900077</GUID>
    </Item>
  </ModOp>
</ModOps>
